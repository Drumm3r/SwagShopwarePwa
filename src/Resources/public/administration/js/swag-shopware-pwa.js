(this.webpackJsonp=this.webpackJsonp||[]).push([["swag-shopware-pwa"],{B7Eo:function(n,e,a){"use strict";a.r(e);var s=a("x7CU"),i=a.n(s);const{Criteria:l}=Shopware.Data,{Context:t}=Shopware;Shopware.Component.override("sw-cms-sidebar",{template:i.a,inject:["repositoryFactory"],data:function(){return{previewSalesChannelId:null,previewSalesChannel:{domains:[]},previewDomain:null}},computed:{salesChannelRepository:function(){return this.repositoryFactory.create("sales_channel")},salesChannelDomains:function(){return this.previewSalesChannel.domains.map(n=>({value:n.url,label:`${n.language.name} (${n.url})`}))},previewEnabled:function(){return null!==this.previewDomain&&null!==this.demoEntityId&&null!==this.demoEntity&&null!==this.page}},methods:{previewPage:function(){const n={entity:this.demoEntity,id:this.demoEntityId},e=this.buildPreviewLink(this.previewDomain,this.page,n);window.open(e,"_blank").focus()},buildPreviewLink:function(n,e,a){let s=`${n}`;return"product_list"===e.type&&"category"===a.entity&&(s+=`navigation/${a.id}`),e.id&&(s+=`/__preview/${e.id}`),s},onSalesChannelChanged:function(n){this.previewSalesChannelId=n;const e=new l({limit:1});e.ids=[n],e.addAssociation("domains"),e.addAssociation("domains.language"),this.salesChannelRepository.search(e,t.api).then(n=>{this.previewSalesChannel=n[0]})}}})},x7CU:function(n,e){n.exports='{% block sw_cms_sidebar_page_settings_content %}\n    {% parent %}\n\n    <sw-sidebar-collapse :expandOnLoading="false">\n\n        <span slot="header">\n            Page Preview\n            <sw-label\n                variant="warning"\n                appearance="pill"\n                size="small">\n                Experimental\n            </sw-label>\n        </span>\n\n        <div slot="content" class="sw-cms-sidebar__settings">\n\n            <sw-alert variant="info" appearance="default" :showIcon="true" :closable="false">\n                Page preview only works in PWA Sales Channels\n            </sw-alert>\n\n            <sw-sales-channel-switch\n                ref="salesChannelSwitch"\n                label="Sales Channel"\n                descriptions="Foo"\n                placeholder="Select Sales Channel"\n                @change-sales-channel-id="onSalesChannelChanged"\n                required>\n            </sw-sales-channel-switch>\n\n            <sw-single-select\n                v-if="previewSalesChannel.domains.length > 0"\n                v-model="previewDomain"\n                required\n                label="Language"\n                placeholder="Select Language"\n                :options="salesChannelDomains">\n            </sw-single-select>\n\n            <sw-button\n                :disabled="!previewEnabled"\n                variant="ghost"\n                @click="previewPage">\n                Preview in new Window\n            </sw-button>\n\n        </div>\n\n    </sw-sidebar-collapse>\n{% endblock %}\n'}},[["B7Eo","runtime"]]]);